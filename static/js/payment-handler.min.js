(function(){'use strict';function safeUpdateElement(element,text,showSpinner){if(!element)return;if(!element.dataset.originalText){element.dataset.originalText=element.textContent;}if(showSpinner){const spinner=document.createElement('span');spinner.className='icon icon-spinner icon-sm icon-mr';spinner.setAttribute('aria-hidden','true');const textNode=document.createTextNode('Processing...');element.textContent='';element.appendChild(spinner);element.appendChild(textNode);}else{element.textContent=element.dataset.originalText||'';}}function initPaymentButtons(){document.addEventListener('click',function(e){const button=e.target.closest('[data-payment-button]');if(!button)return;const action=button.getAttribute('data-payment-action');const statusElement=document.getElementById('mpesaPayStatus');if(action==='process'){safeUpdateElement(button,'',true);setTimeout(function(){safeUpdateElement(button,'',false);if(statusElement){statusElement.textContent='Payment processed successfully';statusElement.setAttribute('role','alert');statusElement.setAttribute('aria-live','polite');}},2000);}});}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initPaymentButtons);}else{initPaymentButtons();}})();